<div plex-include="'partials/Pacientes/iHeader.html'" plex-include-internacion="internacion"></div>

<div layout layout-pretty whiteframe>
    <div flex>
        <md-tabs md-dynamic-height md-border-bottom md-selected="selectedTabIndex">
            <md-tab label="Resúmen internación">
                <div layout>
                    <div flex="25">
                        <md-card class="blue dashboard-card">
                            <md-card-header>
                                <md-card-avatar>
                                    <md-icon>insert_chart</md-icon>
                                </md-card-avatar>
                                <md-card-header-text>
                                    <span class="md-title">Gráficos</span>
                                    <span class="md-subhead">Gráficas de internacion de un pacientes.</span>
                                </md-card-header-text>
                            </md-card-header>
                            <!-- <img ng-src="{{imagePath}}" class="md-card-image" alt="Washed Out"> -->
                            <md-card-content>
                                <p>
                                    Puede ver gráficas de
                                    <ul>
                                        <li>
                                            Balance de líquidos
                                        </li>
                                        <li>
                                            Temperatura
                                        </li>
                                    </ul>
                                </p>
                            </md-card-content>
                            <md-card-actions layout="column" layout-align="start">
                                <md-button ng-click="goToTab(1)">Ir a los gráficos</md-button>
                            </md-card-actions>
                        </md-card>
                    </div>
                    <div flex="25">
                        <md-card class="green dashboard-card">
                            <md-card-header>
                                <md-card-avatar>
                                    <md-icon>content_paste</md-icon>
                                </md-card-avatar>
                                <md-card-header-text>
                                    <span class="md-title">Ultima evolución</span>
                                    <!-- <span class="md-subhead">Gráficas de internacion de un pacientes.</span> -->
                                </md-card-header-text>
                            </md-card-header>
                            <!-- <img ng-src="{{imagePath}}" class="md-card-image" alt="Washed Out"> -->
                            <md-card-content>
                                <p>
                                    {{internacion.evoluciones[internacion.evoluciones.length-1].texto}}
                                </p>
                                <p flex="100">
                                    <i class="fa fa-user-md"></i>
                                    {{internacion.evoluciones[internacion.evoluciones.length-1].createdBy.name}}
                                    {{internacion.evoluciones[internacion.evoluciones.length-1].createdAt | fromNow}}
                                    <br/>
                                    {{internacion.evoluciones[internacion.evoluciones.length-1].createdAt | date: "dd/MM/yyyy  'a las' HH:mm "}}
                                    hs
                                </p>
                            </md-card-content>
                            <md-card-actions layout="column" layout-align="start">
                                <md-button ng-click="goToTab(3)">Ir a las evoluciones</md-button>
                            </md-card-actions>
                        </md-card>

                    </div>
                    <div flex="25">
                        <md-card class="purple dashboard-card">
                            <md-card-header>
                                <md-card-avatar>
                                    <md-icon>subject</md-icon>
                                </md-card-avatar>
                                <md-card-header-text>
                                    <span class="md-title">Antecedentes</span>
                                    <!-- <span class="md-subhead">Gráficas de internacion de un pacientes.</span> -->
                                </md-card-header-text>
                            </md-card-header>
                            <!-- <img ng-src="{{imagePath}}" class="md-card-image" alt="Washed Out"> -->
                            <md-card-content>
                                <p>Antecedentes del paciente</p>
                                <br /><br /><br />
                            </md-card-content>
                            <md-card-actions layout="column" layout-align="start">
                                <md-button ng-click="goToTab(4)">Ir a los antecedentes</md-button>
                            </md-card-actions>
                        </md-card>

                    </div>
                    <div flex="25">
                        <md-card class="yellow dashboard-card">
                            <md-card-header>
                                <md-card-avatar>
                                    <md-icon>timeline</md-icon>
                                </md-card-avatar>
                                <md-card-header-text>
                                    <span class="md-title">Indicadores</span>
                                    <!-- <span class="md-subhead">Gráficas de internacion de un pacientes.</span> -->
                                </md-card-header-text>
                            </md-card-header>
                            <!-- <img ng-src="{{imagePath}}" class="md-card-image" alt="Washed Out"> -->
                            <md-card-content>
                                <p>
                                    <div ng-if="internacion.ingreso.enfermeria.riesgoCaida.total > 0">
                                        Riesgo caidas:
                                        {{internacion.ingreso.enfermeria.riesgoCaida.total}}
                                        <span ng-if="internacion.ingreso.enfermeria.riesgoCaida.total < 25" class="small padding-left padding-right margin-left nivel-verde">Bajo</span>
                                        <span ng-if="internacion.ingreso.enfermeria.riesgoCaida.total >= 25 && internacion.ingreso.enfermeria.riesgoCaida.total <= 50" class="small padding-left padding-right margin-left nivel-amarillo">Medio</span>
                                        <span ng-if="internacion.ingreso.enfermeria.riesgoCaida.total > 50" class="small padding-left padding-right margin-left nivel-rojo">Alto</span>
                                    </div>
                                </p>
                                <p>
                                    Valoración del dolor
                                </p>
                                <p>
                                    Ulceras por presión
                                </p>
                            </md-card-content>
                            <!-- <md-card-actions layout="column" layout-align="start">
                                <md-button ng-click="goToTab(4)">Ir a los antecedentes</md-button>
                            </md-card-actions> -->
                        </md-card>

                    </div>
                </div>
            </md-tab>
            <md-tab label="Gráficos">
                <div plex-include="'partials/internacion/iGraficoLiquidos.html'" plex-include-internacion="internacion" ng-if="internacion.evoluciones.length > 0"></div>
            </md-tab>
            <md-tab label="Internación"></md-tab>
            <md-tab label="Evoluciones">
                <!-- <div plex-include="'partials/internacion/iEvolucionar.html'" plex-include-internacion="internacion"></div> -->
                <div plex-include="'partials/internacion/iEvolucionar.html'" plex-include-internacion="internacion"></div>
            </md-tab>
            <md-tab label="Antecedentes">

                <h3 class="md-headline">Antecedentes</h3>
                <md-table-container ng-if="antecedentesPersonales && antecedentesPersonales.length > 0">
                    <table md-table class="mdTableSingleSelect">
                        <thead md-head>
                            <tr md-row>
                                <th md-column>Tipo</th>
                                <th md-column>Observaciones</th>
                            </tr>
                        </thead>
                        <tbody md-body>
                            <tr md-row ng-repeat="item in antecedentesPersonales">
                                {{item || json}}
                                <td md-cell>
                                    {{item.antecedente.nombre}}
                                </td>
                                <td md-cell>
                                    {{item.observaciones}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </md-table-container>

            </md-tab>
            <md-tab label="Pases">

                <h3 class="md-headline">Pases</h3>
                <md-table-container ng-if="internacion.pases && internacion.pases.length > 0">
                    <table md-table md-row-select class="mdTableSingleSelect">
                        <thead md-head>
                            <tr md-row>
                                <th md-column>Fecha</th>
                                <th md-column>Cama</th>
                                <th md-column>Servicio</th>
                                <th md-column>Resumen internación</th>
                                <th md-column></th>
                            </tr>
                        </thead>
                        <tbody md-body>
                            <tr md-row ng-repeat="item in internacion.pases | orderBy: '-fechaHora'">
                                <td md-cell>
                                    {{item.fechaHora | fromNow }}<br/>
                                    <div class="text-muted small">
                                        {{item.fechaHora | date: "dd/MM/yyyy HH:mm"}}
                                    </div>
                                </td>
                                <td md-cell>
                                    {{item.cama.habitacion}}/{{item.cama.numero}}
                                </td>
                                <td md-cell>
                                    {{item.servicio.nombreCorto}}
                                </td>
                                <td md-cell></td>

                                <td md-cell>
                                    <md-button class="md-icon-button" aria-label="Editar pase" ng-click="editarPase(item)">
                                        <md-icon>create</md-icon>
                                    </md-button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </md-table-container>

            </md-tab>
            <md-tab label="Egreso" ng-disabled="!internacion.egreso">
                <div ng-if="internacion.egreso">
                    <h3 class="md-headline">Egreso</h3>
                    <md-table-container ng-if="internacion.egreso">
                        <table md-table md-row-select class="mdTableSingleSelect">
                            <thead md-head>
                                <tr md-row>
                                    <th md-column>Fecha</th>
                                    <th md-column>Cama</th>
                                    <th md-column>Servicio</th>
                                    <th md-column>Tipo</th>
                                    <th md-column>Resumen</th>
                                </tr>
                            </thead>
                            <tbody md-body>
                                <tr md-row>
                                    <td md-cell>
                                        {{internacion.egreso.fechaHora | fromNow }}<br/>
                                        <div class="text-muted small">
                                            {{internacion.egreso.fechaHora | date: "dd/MM/yyyy HH:mm"}}
                                        </div>
                                    </td>
                                    <td md-cell>
                                        {{internacion.egreso.cama.habitacion}}/{{internacion.egreso.cama.numero}}
                                    </td>
                                    <td md-cell>
                                        {{item.servicio.nombreCorto}}
                                    </td>
                                    <td md-cell>
                                        {{internacion.egreso.tipo}}
                                    </td>
                                    <td md-cell></td>

                                </tr>
                            </tbody>
                        </table>
                    </md-table-container>
                </div>
            </md-tab>
        </md-tabs>
    </div>
</div>
