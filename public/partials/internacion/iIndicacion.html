<div ng-controller="internacion/iIndicacion">
<!-- <pre>
    {{indicacion | json}}
</pre> -->
    <div class="card-block">
        <div class="row">
            <div class="col-xs-4 col-lg-4">
                <h3>Indicaciones de la internación</h3>
            </div>

            <div ng-show="show_toolbar_indicaciones">
                <div class="col-xs-2 col-lg-2">
                    <div class="form-group"></div>
                </div>


                <div class="col-md-4 col-lg-2">
                    <select class="form-control" label="Servicio" ng-model="filtros.servicio" ng-change="filtros.filtrar()" plex="(servicio.nombreCorto) for servicio in servicios"  ng-show="servicios.length > 1"></select>
                </div>

                <div class="col-xs-4 col-lg-2">
                    <!-- <select label="Tipo de indicación" ng-model="indicacion.tipo" plex="(tipo.nombre) for tipo in tiposIndicaciones" ></select> -->
                    <select class="form-control" label="Estado" ng-model="filtros.estado" ng-change="filtros.filtrar()" plex="(estado.nombre) for estado in estados"></select>
                </div>
                <!-- <div class="col-xs-2 text-right" ng-if="!show_comenzar_tratamiento"> -->

                <div class="col-xs-2 col-lg-2 text-right" ng-if="internacion.indicaciones.length">
                    <br/>
                    <button class="btn btn-primary form-control" ng-click="indicaciones.editar()">
                        Nueva indicacion
                    </button>
                </div>
            </div>
        </div>

        <!-- <div class="row" ng-if="show_comenzar_tratamiento"> -->
        <div class="row" ng-show="show_comenzar_tratamiento">
            <div class="col-lg-4 col-lg-offset-4">
                <div class="form-group">
                    <button class="btn btn-success form-control" ng-click="tratamiento.comenzar();" style="height: 70px;font-size: 30px;margin: 17vh 0;border-radius: 50px;">
                        Agregar indicaciones
                    </button>
                </div>
            </div>
        </div>


        <div ng-if="showForm">
            <ng-form name="formEditarIndicaciones">

                <div class="card-block">
                    <div class="row">

                        <div class="col-lg-12">
                            <fieldset>
                                <legend>Cargar nueva indicacion</legend>
                                <div class="row">

                                    <div class="col-lg-2" ng-if="accion == 'agregar'">
                                        <select label="Tipo de indicación" ng-model="indicacion.tipo" plex="(tipo.nombre) for tipo in tiposIndicaciones" ></select>
                                    </div>

                                    <div class="col-lg-2" ng-if="accion == 'editar'">
                                        <label>Tipo de indicación</label>
                                        <br />
                                        {{indicacion.tipo.nombre || indicacion.tipo}}
                                    </div>
                                </div>

                                <div class="row">
                                    <!-- Otra indicacion -->
                                    <div ng-if="!indicacion.tipo || indicacion.tipo.nombre == 'Otra indicación'">
                                        <div class="col-lg-9">
                                            <input type="text" label="Descripción" ng-model="indicacion.descripcion" plex/>
                                        </div>

                                        <div class="col-lg-1">
                                            <select label="Vía" ng-model="indicacion.via" plex>
                                                <option value="">Seleccione vía</option>
                                                <option value="SC">SC</option>
                                                <option value="EV">EV</option>
                                                <option value="VO">VO</option>
                                            </select>
                                        </div>

                                        <div class="col-lg-2">
                                            <select label="Frecuencia" ng-model="indicacion.frecuencia" plex>
                                                <option value="unica">Única dosis</option>
                                                <option value="24">Una vez al día</option>
                                                <option value="12">Cada 12 hs.</option>
                                                <option value="8">Cada 8 hs.</option>
                                                <option value="6">Cada 6 hs.</option>
                                                <option value="4">Cada 4 hs.</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Heparina o Profilaxis / Proteccion gastrica / Otar medicacion -->
                                    <div ng-if="indicacion.tipo.nombre == 'Antibióticos' || indicacion.tipo.nombre == 'Heparina o profilaxis' ||
                                        indicacion.tipo.nombre == 'Protección gástrica' || indicacion.tipo.nombre == 'Otra medicación'">
                                        <div class="col-lg-9">
                                            <input type="text" label="Descripción" ng-model="indicacion.medicamento.descripcion" plex/>
                                        </div>

                                        <div class="col-lg-1">
                                            <select label="Vía" ng-model="indicacion.via" plex>
                                                <option value="">Seleccione vía</option>
                                                <option value="SC">SC</option>
                                                <option value="EV">EV</option>
                                                <option value="VO">VO</option>
                                            </select>
                                        </div>

                                        <div class="col-lg-2">
                                            <select label="Frecuencia" ng-model="indicacion.frecuencia" plex>
                                                <option value="unica">Única dosis</option>
                                                <option value="24">Una vez al día</option>
                                                <option value="12">Cada 12 hs.</option>
                                                <option value="8">Cada 8 hs.</option>
                                                <option value="6">Cada 6 hs.</option>
                                                <option value="4">Cada 4 hs.</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Plan de Hidratacion -->
                                    <div ng-if="indicacion.tipo.nombre == 'Plan Hidratación Parenteral'">
                                        <!-- <div class="col-lg-2">
                                            <input type="text" label="Ringer-Lactato" ng-model="indicacion.planHidratacion.soluciones[2].cantidad" suffix="ml" plex/>
                                        </div>
                                        <div class="col-lg-2">
                                            <input type="text" label="Solución fisiológica" ng-model="indicacion.planHidratacion.soluciones[0].cantidad" suffix="ml" plex/>
                                        </div>

                                        <div class="col-lg-2">
                                            <input type="text" label="Dextrosa" ng-model="indicacion.planHidratacion.soluciones[1].cantidad" suffix="ml" plex />
                                        </div>

                                        <div class="col-lg-2">
                                            <div class="row">
                                                <div class="col-lg-7">
                                                    <label>Dilución Dx</label>
                                                    <br />

                                                    <div class="btn-group" role="group" aria-label="Grupo dilucion">
                                                        <button type="button" ng-class="{'active': indicacion.planHidratacion.soluciones[1].dilucion == 5 }" class=" btn btn-primary btn-flat" ng-model="indicacion.planHidratacion.soluciones[1].dilucion" ng-click="indicacion.planHidratacion.soluciones[1].dilucion = 5" ng-disabled="!indicacion.planHidratacion.soluciones[1].cantidad">
                                                            5%
                                                        </button>
                                                        <button type="button" ng-class="{'active': indicacion.planHidratacion.soluciones[1].dilucion == 10 }" class=" btn btn-primary btn-flat" ng-model="indicacion.planHidratacion.soluciones[1].dilucion" ng-click="indicacion.planHidratacion.soluciones[1].dilucion = 10" ng-disabled="!indicacion.planHidratacion.soluciones[1].cantidad">
                                                            10%
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="col-lg-5">
                                                    <input type="text" label="Frascos" ng-model="indicacion.planHidratacion.cantidadFrascos" plex/>
                                                </div>
                                            </div>
                                        </div> -->

                                        <div class="col-lg-2">
                                            <input type="text" label="Ringer-Lactato" ng-model="indicacion.planHidratacion.ringerLactato.cantidad" suffix="ml" plex/>
                                        </div>
                                        <div class="col-lg-2">
                                            <input type="text" label="Solución fisiológica" ng-model="indicacion.planHidratacion.solucionFisiologica.cantidad" suffix="ml" plex/>
                                        </div>

                                        <div class="col-lg-2">
                                            <input type="text" label="Dextrosa" ng-model="indicacion.planHidratacion.dextrosa.cantidad" suffix="ml" plex />
                                        </div>

                                        <div class="col-lg-2">
                                            <div class="row">
                                                <div class="col-lg-7">
                                                    <label>Dilución Dx</label>
                                                    <br />

                                                    <div class="btn-group" role="group" aria-label="Grupo dilucion">
                                                        <button type="button" ng-class="{'active': indicacion.planHidratacion.dextrosa.dilucion == 5 }" class=" btn btn-primary btn-flat" ng-model="indicacion.planHidratacion.dextrosa.dilucion" ng-click="indicacion.planHidratacion.dextrosa.dilucion = 5" ng-disabled="!indicacion.planHidratacion.dextrosa.cantidad">
                                                            5%
                                                        </button>
                                                        <button type="button" ng-class="{'active': indicacion.planHidratacion.dextrosa.dilucion == 10 }" class=" btn btn-primary btn-flat" ng-model="indicacion.planHidratacion.dextrosa.dilucion" ng-click="indicacion.planHidratacion.dextrosa.dilucion = 10" ng-disabled="!indicacion.planHidratacion.dextrosa.cantidad">
                                                            10%
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="col-lg-5">
                                                    <input type="text" label="Frascos" ng-model="indicacion.planHidratacion.cantidadFrascos" plex/>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- <div class="col-lg-2">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <input type="text" label="Solución fisiológica" ng-model="indicacion.planHidratacion.soluciones[0].cantidad" suffix="ml" plex/>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-7">
                                                    <input type="text" label="Dextrosa" ng-model="indicacion.planHidratacion.soluciones[1].cantidad" suffix="ml" plex />
                                                </div>
                                                <div class="col-lg-5">
                                                        <label>Dilución</label>
                                                        <br />
                                                        <input type="radio" id="radio1" name="dilucion" class="without-radio" ng-model="indicacion.planHidratacion.soluciones[1].dilucion" />
                                                        <label for="radio1" class="without-radio">5%</label>

                                                        <span class="separador">
                                                            |
                                                        </span>

                                                        <input type="radio" id="radio2" name="dilucion" class="without-radio" ng-model="indicacion.planHidratacion.soluciones[1].dilucion" />
                                                        <label for="radio2" class="without-radio">10%</label>

                                                </div>

                                            </div>

                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <input type="text" label=" Ringer-Lactato" ng-model="indicacion.planHidratacion.soluciones[2].cantidad" suffix="ml" plex/>
                                                </div>
                                            </div>
                                        </div> -->

                                        <div class="col-lg-1">
                                            <select label="Vía" ng-model="indicacion.via" plex>
                                                <option value="">Seleccione vía</option>
                                                <option value="EV">EV</option>
                                                <option value="SC">SC</option>
                                            </select>

                                            <!-- <div class="row">
                                                <div class="col-lg-12">
                                                    <label>Dilución</label>
                                                    <br />
                                                    <input type="radio" id="radio1" name="dilucion" class="without-radio" ng-model="indicacion.planHidratacion.soluciones[1].dilucion" />
                                                    <label for="radio1" class="without-radio">5%</label>

                                                    <span class="separador">
                                                        |
                                                    </span>

                                                    <input type="radio" id="radio2" name="dilucion" class="without-radio" ng-model="indicacion.planHidratacion.soluciones[1].dilucion" />
                                                    <label for="radio2" class="without-radio">10%</label>
                                                </div>
                                            </div> -->
                                        </div>

                                        <div class="col-lg-2">
                                            <select label="Frecuencia" ng-model="indicacion.frecuencia" plex>
                                                <option value="unica">Única dosis</option>
                                                <option value="24">Una vez al día</option>
                                                <option value="12">Cada 12 hs.</option>
                                                <option value="8">Cada 8 hs.</option>
                                                <option value="6">Cada 6 hs.</option>
                                                <option value="4">Cada 4 hs.</option>
                                            </select>
                                        </div>

                                        <div class="col-lg-1">
                                            <label>¿Agregados?</label>
                                            <input type="checkbox" label="\" ng-model="indicacion.planHidratacion.poseeAgregados" plex="switch">
                                        </div>

                                        <!-- <input type="text" label="Descripción" ng-model="indicacion.descripcion" ng-show="!opcionesIndicacion.length" plex />
                                            <select label="Indicación" ng-model="indicacion.opcionIndicacion" plex="(opcion.nombre) for opcion in opcionesIndicacion" ng-show="opcionesIndicacion.length > 0"></select> -->
                                    </div>

                                    <!-- Controles -->
                                    <div ng-if="indicacion.tipo.nombre == 'Controles'">
                                        <div class="col-lg-10">
                                            <select label="Tipo de control" ng-model="indicacion.controles.tipo" plex="(opcion.nombre) for opcion in tiposControles"></select>
                                        </div>

                                        <div class="col-lg-2">
                                            <select label="Frecuencia" ng-model="indicacion.frecuencia" plex>
                                                <option value="unica">Única dosis</option>
                                                <option value="24">Una vez al día</option>
                                                <option value="12">Cada 12 hs.</option>
                                                <option value="8">Cada 8 hs.</option>
                                                <option value="6">Cada 6 hs.</option>
                                                <option value="4">Cada 4 hs.</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Controles generales -->
                                    <div ng-if="indicacion.tipo.nombre == 'Cuidados generales'">
                                        <div class="col-lg-5">
                                            <select label="Tipo de control" ng-model="indicacion.cuidadosGenerales.tipo" plex="(opcion.nombre) for opcion in tiposCuidadosGenerales"></select>
                                        </div>

                                        <!-- <div class="col-lg-2">
                                            <select label="Vía" ng-model="indicacion.via" plex >
                                                <option value="SC">SC</option>
                                                <option value="EV">EV</option>
                                                <option value="VO">VO</option>
                                            </select>
                                        </div> -->
                                    </div>

                                    <!-- Controles especiales -->
                                    <div ng-if="indicacion.tipo.nombre == 'Cuidados especiales'">
                                        <div class="col-lg-2">
                                            <select label="Tipo de cuidado" ng-model="indicacion.cuidadosEspeciales.tipo" plex >
                                                <option value="Sonda">Sonda</option>
                                                <option value="Aislamiento">Aislamiento</option>
                                            </select>
                                        </div>

                                        <div ng-if="indicacion.cuidadosEspeciales.tipo == 'Sonda'">
                                            <div class="col-lg-2">
                                                <select label="Tipo de sonda" ng-model="indicacion.cuidadosEspeciales.sonda.tipo" plex >
                                                    <option value="SNG">SNG</option>
                                                    <option value="SNY">SNY</option>
                                                    <option value="Gastroenteritis">Gastroenteritis</option>
                                                    <option value="Ileostomías">Ileostomías</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-2">
                                                <select label="¿Qué hacer?" ng-model="indicacion.cuidadosEspeciales.sonda.accion" plex >
                                                    <option value="Colocación">Colocación</option>
                                                    <option value="Limpieza">Limpieza</option>
                                                    <option value="Extracción">Extracción</option>
                                                </select>
                                            </div>
                                        </div>
                                        <!-- <div class="col-lg-7">
                                            <select label="Tipo de control" ng-model="indicacion.controles.tipo" plex="(opcion.nombre) for opcion in tiposControles" ></select>
                                        </div> -->
                                    </div>

                                    <!-- Dieta -->
                                    <!-- <div class="col-lg-1">
                                        <div ng-if="indicacion.tipo.nombre == 'Heparina o profilaxis' || indicacion.tipo.nombre == 'Plan Hidratación Parenteral' ||
                                            indicacion.tipo.nombre == 'Protección gástrica' || indicacion.tipo.nombre == 'Otra medicación'">
                                            <select label="Vía" ng-model="indicacion.via" plex>
                                                <option value="SC">SC</option>
                                                <option value="EV">EV</option>
                                                <option value="VO">VO</option>
                                            </select>
                                        </div>
                                    </div> -->

                                    <div ng-if="indicacion.tipo.nombre == 'Solicitud prestaciones'">
                                        <!-- <div class="col-md-2">
                                            <div class="form-group">
                                                <input type="text" label="Fecha pedido" ng-model="prestacionesEdit.fechaHora" plex="date">
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <input type="text" label="Hora pedido" ng-model="prestacionesEdit.fechaHora" plex="time">
                                            </div>
                                        </div> -->

                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <select label="Prioridad" ng-model="indicacion.prestaciones.prioridad" plex="(item.nombre) for item in indicaciones.prestaciones.prioridad"></select>
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <select label="Tipo prestación" ng-model="indicacion.prestaciones.tipoPrestacion" min="3" plex="(item.nombre + ' (' + item.grupo + ')') for item in indicaciones.prestaciones.buscarTipoPrestacion($value)" required></select>
                                            </div>
                                        </div>

                                        <!-- <div class="col-xs-2" ng-if="prestacionesEdit.id">
                                            <div class="form-group">
                                                <input type="text" label="Fecha turno" ng-model="prestacionesEdit.turnoFechaHora" plex="date" />
                                            </div>
                                        </div>

                                        <div class="col-xs-2" ng-if="prestacionesEdit.id">
                                            <div class="form-group">
                                                <input type="text" label="Hora turno" ng-model="prestacionesEdit.turnoFechaHora" plex="time" />
                                            </div>
                                        </div> -->

                                        <div class="col-xs-6">
                                            <input type="text" label="Texto" ng-model="indicacion.prestaciones.texto" plex class="form-control" required/>
                                        </div>
                                    </div>

                                    <div ng-if="indicacion.tipo.nombre == 'Nutrición'">
                                        <div class="col-lg-12">
                                            <label>
                                                Dieta
                                            </label>

                                            <div class="row">
                                                <div class="col-lg-3">
                                                    <input type="checkbox" label="Ayuno" ng-model="indicacion.nutricion.tipo.ayuno" plex="checkbox">
                                                    <input type="checkbox" label="General" ng-model="indicacion.nutricion.tipo.general" plex="checkbox">
                                                    <input type="checkbox" label="Diabético" ng-model="indicacion.nutricion.tipo.diabetico" plex="checkbox">
                                                    <input type="checkbox" label="Insuficiencia renal" ng-model="indicacion.nutricion.tipo.insuficienciaRenal" plex="checkbox">
                                                    <input type="checkbox" label="Hepato/Gastro protectora" ng-model="indicacion.nutricion.tipo.hepatoGastroProtectora" plex="checkbox">
                                                    <input type="checkbox" label="Líquido 01" ng-model="indicacion.nutricion.tipo.liquido01" plex="checkbox">

                                                </div>
                                                <div class="col-lg-3">
                                                    <input type="checkbox" label="Blando sin carne 02" ng-model="indicacion.nutricion.tipo.blandoSinCarne02" plex="checkbox">
                                                    <input type="checkbox" label="Blando con carne 03" ng-model="indicacion.nutricion.tipo.blandoConCarne03" plex="checkbox">
                                                    <input type="checkbox" label="Individual" ng-model="indicacion.nutricion.tipo.individual" plex="checkbox">
                                                    <input type="checkbox" label="Pediátrico 1-2" ng-model="indicacion.nutricion.tipo.pediatrico1_2" plex="checkbox">
                                                    <input type="checkbox" label="Lactante 1-2" ng-model="indicacion.nutricion.tipo.lactante1_2" plex="checkbox">
                                                    <input type="checkbox" label="Blando mecánico" ng-model="indicacion.nutricion.tipo.blandoMecanico" plex="checkbox">
                                                </div>
                                                <div class="col-lg-3">

                                                    <input type="checkbox" label="Acompañante" ng-model="indicacion.nutricion.tipo.acompanante" plex="checkbox">
                                                    <input type="checkbox" label="Licuado" ng-model="indicacion.nutricion.tipo.licuado" plex="checkbox">
                                                    <input type="checkbox" label="Rico en residuo" ng-model="indicacion.nutricion.tipo.ricoEnResiduo" plex="checkbox">
                                                    <input type="checkbox" label="Astringente" ng-model="indicacion.nutricion.tipo.astringente" plex="checkbox">
                                                    <input type="checkbox" label="Sin sal" ng-model="indicacion.nutricion.tipo.sinSal" plex="checkbox">
                                                    <input type="checkbox" label="Sin gluten" ng-model="indicacion.nutricion.tipo.sinGluten" plex="checkbox">
                                                </div>
                                                <div class="col-lg-3">
                                                    <input type="checkbox" label="Todo cocido" ng-model="indicacion.nutricion.tipo.todoCocido" plex="checkbox">
                                                    <input type="checkbox" label="Hiper con colacion" ng-model="indicacion.nutricion.tipo.hiperConColacion" plex="checkbox">
                                                    <input type="checkbox" label="Nada por boca" ng-model="indicacion.nutricion.tipo.nadaPorBoca" plex="checkbox">
                                                    <input type="checkbox" label="Hipocalórico" ng-model="indicacion.nutricion.tipo.hipocalorico" plex="checkbox">
                                                    <input type="checkbox" label="Preparado oral" ng-model="indicacion.nutricion.tipo.preparadoOral" plex="checkbox">
                                                    <input type="text" ng-disabled="!indicacion.nutricion.tipo.preparadoOral" suffix="ml" placeholder="Cant. preparado oral" ng-model="indicacion.nutricion.cantidadPreparadoOral" plex />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- <div class="col-lg-2 text-right">
                                        <br/>
                                        <div ng-show="editandoIndicacion">
                                            <button type="button" class="btn btn-default tips" title="Cancelar edición de la indicación" ng-click="indicaciones.cancelar()">
                                                <i class="mdi mdi-block-helper"></i>
                                            </button>
                                            <button type="button" class="btn btn-success btn-flat tips" title="Guardar indicación" ng-click="indicaciones.guardar()">
                                                <i class="mdi mdi-content-save"></i>
                                            </button>
                                        </div>
                                        <div ng-show="!editandoIndicacion">

                                            <button type="button" class="btn btn-success btn-flat tips" title="Agregar la indicación" ng-click="indicaciones.agregar()">
                                                Agregar
                                            </button>
                                        </div>

                                    </div> -->

                                    <!-- Opciones para los agregados del plan de hidratacion -->
                                    <div ng-if="indicacion.tipo.nombre == 'Plan Hidratación Parenteral' && indicacion.planHidratacion.poseeAgregados">

                                        <!-- <div class="row" ng-if="!editandoAgregado && indicacion.planHidratacion.agregados.length > 0"> -->
                                        <div class="row" >
                                            <div class="col-lg-offset-2 col-lg-7">
                                                <legend>Agregados</legend>

                                                <div class="row">

                                                    <div class="col-lg-3">
                                                        <select label="Tipo agregado" ng-model="agregado.tipoAgregado" plex="(agregado.nombre) for agregado in tiposAgregados"></select>
                                                    </div>

                                                    <div class="col-lg-4">
                                                        <input type="text" label="Descripción" ng-model="agregado.descripcion" plex/>
                                                    </div>

                                                    <div class="col-lg-3">
                                                        <select label="Frasco" ng-model="agregado._frascos" plex="(frasco.value) for frasco in _frascos" multiple></select>
                                                        <!-- <select label="Frasco" ng-model="agregado._frascos" plex="(frasco.value) for frasco in _frascos" multiple ng-if="!editandoAgregado"></select> -->
                                                        <!-- <select label="Frasco" ng-model="agregado._frascos" plex="(frasco.value) for frasco in _frascosEdicion" multiple ng-if="editandoAgregado" ></select> -->
                                                    </div>

                                                    <div class="col-lg-2 text-right">
                                                        <br/>
                                                        <!-- <button type="button" class="btn btn-success btn-flat tips" title="Agregar preparado" ng-click="editarAgregado()">
                                                            <i class="mdi mdi-plus"></i>
                                                        </button> -->

                                                        <div ng-show="editandoAgregado">
                                                            <button type="button" class="btn btn-default tips" title="Cancelar edición del agregado" ng-click="indicaciones.agregados.cancelar()">
                                                                <i class="mdi mdi-block-helper"></i>
                                                            </button>
                                                            <button type="button" class="btn btn-success btn-flat tips" title="Guardar agregado" ng-click="indicaciones.agregados.guardar(agregado)">
                                                                <i class="mdi mdi-content-save"></i>
                                                            </button>
                                                        </div>
                                                        <div ng-show="!editandoAgregado">
                                                            <button class="btn btn-default btn-flat tips" title="Agregar" ng-click="indicaciones.agregados.editar()">
                                                                <i class="mdi mdi-plus"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>

                                                <table class="table table-condensed" ng-if="!editandoAgregado && indicacion.planHidratacion.agregados.length > 0">
                                                    <thead>
                                                        <th>#</th>
                                                        <th>Tipo</th>
                                                        <th>Descripcion</th>
                                                        <th>Frasco(s)</th>
                                                        <th></th>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="agregado in indicacion.planHidratacion.agregados">
                                                            <td>{{agregado.posicion+1}}</td>
                                                            <td>
                                                                <span>
                                                                    {{agregado.tipoAgregado.nombre ? agregado.tipoAgregado.nombre : agregado.tipoAgregado}}
                                                                </span>
                                                            </td>
                                                            <td>
                                                                {{agregado.descripcion}}
                                                            </td>
                                                            <td>
                                                                <span ng-repeat="frasco in agregado.frascos">
                                                                {{frasco}}
                                                                </span>
                                                            </td>
                                                            <td>
                                                                <button class="btn btn-default btn-flat tips" title="Editar agregado" ng-click="indicaciones.agregados.editar(agregado)">
                                                                    <i class="mdi mdi-pencil"></i>
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                        </div>
                                    </div>

                                <!-- <div class="row">
                                    <div class="col-lg-12">
                                        <button type="button" class="btn btn-default tips" title="Cancelar edición de la indicación" ng-click="indicaciones.cancelar()">
                                            <i class="mdi mdi-block-helper"></i>
                                        </button>
                                        <button type="button" class="btn btn-success btn-flat tips" title="Guardar indicación" ng-click="indicaciones.guardar()">
                                            <i class="mdi mdi-content-save"></i>
                                        </button>
                                    </div>
                                </div> -->
                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="card-block margin-top text-right">

                                            <button type="button" class="btn btn-default btn-flat" ng-click="indicaciones.cancelar();">Cancelar</button>
                                            <button type="button" class="btn btn-success btn-flat tips" title="Agregar indicación" ng-click="indicaciones.guardar(indicacion)">
                                                <span ng-if="indicacion.id">Guardar</span>
                                                <span ng-if="!indicacion.id">Agregar</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                            </fieldset>
                        </div>
                    </div>

                </div>

                <div class="card-block">
                    <!-- <div class="row">
                        <div class="col-lg-4">
                            <fieldset>
                                <legend>Controles</legend>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="Signos vitales" ng-model="tratamientoEdit.controlSignosVitales" plex="checkbox"/>
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Frecuencia" ng-model="tratamientoEdit.frecuenciaSignosVitales" ng-if="tratamientoEdit.controlSignosVitales" plex="(frecuencia.nombre) for frecuencia in frecuencias "></select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="Diuresis" ng-model="tratamientoEdit.controlDiuresis" plex="checkbox"/>
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Frecuencia" ng-model="tratamientoEdit.frecuenciaDiuresis" ng-if="tratamientoEdit.controlDiuresis" plex="(frecuencia.nombre) for frecuencia in frecuencias "></select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">

                                        <input type="checkbox" label="Peso" ng-model="tratamientoEdit.controlPeso" plex="checkbox"/>
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Frecuencia" ng-model="tratamientoEdit.frecuenciaPeso" ng-if="tratamientoEdit.controlPeso" plex="(frecuencia.nombre) for frecuencia in frecuencias "></select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="Glasgow" ng-model="tratamientoEdit.controlGlasgow" plex="checkbox"/>
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Frecuencia" ng-model="tratamientoEdit.frecuenciaGlasgow" ng-if="tratamientoEdit.controlGlasgow" plex="(frecuencia.nombre) for frecuencia in frecuencias "></select>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="col-lg-4">
                            <fieldset>
                                <legend>Cuidados generales</legend>

                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="Rotar decubito" ng-model="tratamientoEdit.rotarDecubito" plex="checkbox">
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Frecuencia" ng-model="tratamientoEdit.frecuenciaRotarDecubito" ng-if="tratamientoEdit.rotarDecubito" plex="(frecuencia.nombre) for frecuencia in frecuencias "></select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="Aspirar secreciones" ng-model="tratamientoEdit.aspirarSecreciones" plex="checkbox">
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Frecuencia" ng-model="tratamientoEdit.frecuenciaAspirarSecreciones" ng-if="tratamientoEdit.aspirarSecreciones" plex="(frecuencia.nombre) for frecuencia in frecuencias "></select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="Kinesiología" ng-model="tratamientoEdit.kinesiologia" plex="checkbox">
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Frecuencia" ng-model="tratamientoEdit.frecuenciaKinesiologia" ng-if="tratamientoEdit.kinesiologia" plex="(frecuencia.nombre) for frecuencia in frecuencias "></select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="Oxígeno l/min" ng-model="tratamientoEdit.oxigeno" plex="checkbox">
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Frecuencia" ng-model="tratamientoEdit.frecuenciaOxigeno" ng-if="tratamientoEdit.oxigeno" plex="(frecuencia.nombre) for frecuencia in frecuencias "></select>
                                    </div>
                                </div>
                            </fieldset>
                        </div>

                        <div class="col-lg-4">
                            <fieldset>
                                <legend>Cuidados especiales</legend>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="SNG" ng-model="tratamientoEdit.SNG" plex="checkbox">
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Cuál" ng-model="tratamientoEdit.cualSNG" ng-if="tratamientoEdit.SNG" plex>
                                            <option value="SNG1">SNG1</option>
                                            <option value="SNG2">SNG2</option>
                                            <option value="SNG3">SNG3</option>
                                            <option value="SNG4">SNG4</option>
                                            <option value="SNG5">SNG5</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="Sonda vesical" ng-model="tratamientoEdit.sondaVesical" plex="checkbox">
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="checkbox" label="Aislamiento" ng-model="tratamientoEdit.aislamiento" plex="checkbox">
                                    </div>
                                    <div class="col-lg-6">
                                        <select hint="Cuál" ng-model="tratamientoEdit.cualAislamiento" ng-if="tratamientoEdit.aislamiento" plex>
                                            <option value="Neutropenico">Neutropénico</option>
                                            <option value="Respiratorio">Respitaorio</option>
                                            <option value="Contacto">De contacto</option>
                                        </select>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div> -->

                    <div class="row">
                        <!-- <div class="col-lg-8">
                            <fieldset>
                                <legend>Dieta</legend>
                                <div class="row">
                                    <div class="col-lg-3">
                                        <input type="checkbox" label="Ayuno" ng-model="tratamientoEdit.dietaAyuno" plex="checkbox">
                                        <input type="checkbox" label="General" ng-model="tratamientoEdit.dietaGeneral" plex="checkbox">
                                        <input type="checkbox" label="Diabético" ng-model="tratamientoEdit.dietaDiabetico" plex="checkbox">
                                        <input type="checkbox" label="Insuficiencia renal" ng-model="tratamientoEdit.dietaInsuficienciaRenal" plex="checkbox">
                                        <input type="checkbox" label="Hepato/Gastro protectora" ng-model="tratamientoEdit.dietaHepatoGastroProtectora" plex="checkbox">
                                        <input type="checkbox" label="Líquido 01" ng-model="tratamientoEdit.liquido01" plex="checkbox">

                                    </div>
                                    <div class="col-lg-3">
                                        <input type="checkbox" label="Blando sin carne 02" ng-model="tratamientoEdit.blandoSinCarne02" plex="checkbox">
                                        <input type="checkbox" label="Blando con carne 03" ng-model="tratamientoEdit.blandoConCarne03" plex="checkbox">
                                        <input type="checkbox" label="Individual" ng-model="tratamientoEdit.individual" plex="checkbox">
                                        <input type="checkbox" label="Pediátrico 1-2" ng-model="tratamientoEdit.pediatrico1_2" plex="checkbox">
                                        <input type="checkbox" label="Lactante 1-2" ng-model="tratamientoEdit.lactante1_2" plex="checkbox">
                                        <input type="checkbox" label="Blando mecánico" ng-model="tratamientoEdit.dietaBlandoMecanico" plex="checkbox">
                                    </div>
                                    <div class="col-lg-3">

                                        <input type="checkbox" label="Acompañante" ng-model="tratamientoEdit.dietaAcompanante" plex="checkbox">
                                        <input type="checkbox" label="Licuado" ng-model="tratamientoEdit.dietaLicuado" plex="checkbox">
                                        <input type="checkbox" label="Rico en residuo" ng-model="tratamientoEdit.dietaRicoEnResiduo" plex="checkbox">
                                        <input type="checkbox" label="Astringente" ng-model="tratamientoEdit.dietaAstringente" plex="checkbox">
                                        <input type="checkbox" label="Sin sal" ng-model="tratamientoEdit.sinSal" plex="checkbox">
                                        <input type="checkbox" label="Sin gluten" ng-model="tratamientoEdit.sinGluten" plex="checkbox">
                                    </div>
                                    <div class="col-lg-3">
                                        <input type="checkbox" label="Todo cocido" ng-model="tratamientoEdit.todoCocido" plex="checkbox">
                                        <input type="checkbox" label="Hiper con colacion" ng-model="tratamientoEdit.hiperConColacion" plex="checkbox">
                                        <input type="checkbox" label="Nada por boca" ng-model="tratamientoEdit.nadaPorBoca" plex="checkbox">
                                        <input type="checkbox" label="Hipocalórico" ng-model="tratamientoEdit.hipocalorico" plex="checkbox">
                                    </div>
                                </div>
                            </fieldset>
                        </div> -->
                        <!-- <div class="col-lg-4">
                            <fieldset>
                                <legend>Preparado enteral</legend>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="text" label="Tipo" ng-model="tratamientoEdit.tipoPreparadoEnteral" plex>
                                    </div>
                                    <div class="col-lg-6">
                                        <input type="text" label="Observaciones" ng-model="tratamientoEdit.observacionesPreparadoEnteral" plex>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4">
                                        <input type="text" label="Volúmen 24 hs." ng-model="tratamientoEdit.volumen24hs" plex-suffix="ml" plex>
                                    </div>
                                    <div class="col-lg-4">
                                        <input type="text" label="Cantidad de tomas" ng-model="tratamientoEdit.cantidadDeTomas" plex>
                                    </div>
                                    <div class="col-lg-4">
                                        <input type="text" label="Velocidad (ml/h)" ng-model="tratamientoEdit.velocidad" plex>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div> -->

                    </div>

                </div>
            </ng-form>

        </div>

        <div class="row" ng-if="filtros.indicaciones.length > 0 && !showForm">
            <div class="col-lg-12">
                <legend>Indicaciones</legend>
                <table class="table table-hover table-bordered highlight">
                    <thead>
                        <tr class="exclude">
                            <!-- <th rowspan="2" class="text-center">#</th> -->
                            <th rowspan="2" class="text-center vert-align">Medicación / Hidratación / Alimentación parenteral</th>
                            <th rowspan="2" class="text-center">Vía</th>
                            <th rowspan="2" class="text-center">Frec.</th>
                            <!-- <th colspan="6" class="text-center">Turno mañana</th>
                            <th colspan="6" class="text-center">Turno tarde</th>
                            <th colspan="6" class="text-center">Turno noche</th>
                            <th colspan="6" class="text-center">Turno madrugada</th> -->

                            <th rowspan="2" class="text-center">
                                Usuario / Servicio
                            </th>
                            <th rowspan="2" class="text-center">
                                Fecha
                            </th>
                            <th rowspan="2" class="text-center">Acciones</th>
                        </tr>
                        <!-- <tr class="exclude">
                            <th>
                                07
                            </th>
                            <th>
                                08
                            </th>
                            <th>
                                09
                            </th>
                            <th>
                                10
                            </th>
                            <th>
                                11
                            </th>
                            <th>
                                12
                            </th>
                            <th>
                                13
                            </th>
                            <th>
                                14
                            </th>
                            <th>
                                15
                            </th>
                            <th>
                                16
                            </th>
                            <th>
                                17
                            </th>
                            <th>
                                18
                            </th>
                            <th>
                                19
                            </th>
                            <th>
                                20
                            </th>
                            <th>
                                21
                            </th>
                            <th>
                                22
                            </th>
                            <th>
                                23
                            </th>
                            <th>
                                24
                            </th>
                            <th>
                                01
                            </th>
                            <th>
                                02
                            </th>
                            <th>
                                03
                            </th>
                            <th>
                                04
                            </th>
                            <th>
                                05
                            </th>
                            <th>
                                06
                            </th>
                        </tr> -->
                    </thead>
                    <tbody>
                        <tr ng-repeat="indicacion in filtros.indicaciones track by $index" >
                            <!-- <td >
                                {{$index}}
                            </td> -->
                            <td >
                                <span>
                                    <i>{{indicacion.tipo.nombre ? indicacion.tipo.nombre : indicacion.tipo }}</i>
                                </span>
                                <span ng-if="indicacion.tipo.nombre == 'Plan Hidratación Parenteral' || indicacion.tipo == 'Plan Hidratación Parenteral'">
                                    {{indicacion.planHidratacion.tipoPlan.nombre ? indicacion.planHidratacion.tipoPlan.nombre : indicacion.planHidratacion.tipoPlan }}
                                    {{indicacion.planHidratacion.soluciones[0].cantidad+indicacion.planHidratacion.soluciones[1].cantidad+indicacion.planHidratacion.soluciones[2].cantidad}}
                                    ml
                                    {{indicacion.planHidratacion.tipoSolucion.nombre ? indicacion.planHidratacion.tipoSolucion.nombre : indicacion.planHidratacion.tipoSolucion }}
                                </span>

                                <span ng-if="indicacion.tipo.nombre == 'Otra indicación' || indicacion.tipo == 'Otra indicación'">
                                    <br />
                                    {{indicacion.descripcion}}
                                </span>

                                <div ng-if="indicacion.planHidratacion.agregados.length">
                                    <div ng-repeat="agregado in indicacion.planHidratacion.agregados">
                                        +
                                        {{agregado.tipoAgregado.nombre ? agregado.tipoAgregado.nombre : agregado.tipoAgregado}}
                                        {{agregado.descripcion}}
                                    </div>
                                </div>

                                <div ng-if="indicacion.tipo.nombre == 'Heparina o profilaxis' || indicacion.tipo == 'Heparina o profilaxis'
                                    || indicacion.tipo.nombre == 'Protección gástrica' || indicacion.tipo == 'Protección gástrica'
                                    || indicacion.tipo.nombre == 'Antibióticos' || indicacion.tipo == 'Antibióticos'
                                    || indicacion.tipo.nombre == 'Otra medicación' || indicacion.tipo == 'Otra medicación'
                                    ">
                                    {{indicacion.medicamento.descripcion}}
                                </div>

                                <div ng-if="indicacion.tipo.nombre == 'Controles' || indicacion.tipo == 'Controles'">
                                    {{indicacion.controles.tipo.nombre ? indicacion.controles.tipo.nombre : indicacion.controles.tipo}}
                                </div>

                                <div ng-if="indicacion.tipo.nombre == 'Cuidados generales' || indicacion.tipo == 'Cuidados generales'">
                                    {{indicacion.cuidadosGenerales.tipo.nombre ? indicacion.cuidadosGenerales.tipo.nombre : indicacion.cuidadosGenerales.tipo}}
                                </div>

                                <div ng-if="indicacion.tipo.nombre == 'Cuidados especiales' || indicacion.tipo == 'Cuidados especiales'">
                                    {{indicacion.cuidadosEspeciales.tipo}}
                                </div>

                                <div ng-if="indicacion.tipo.nombre == 'Solicitud prestaciones' || indicacion.tipo == 'Solicitud prestaciones'">

                                    <span class="label label-default" ng-show="indicacion.prestaciones.prioridad == 'No prioritario' || indicacion.prestaciones.prioridad.nombre == 'No prioritario'">No prioritario</span>
                                    <span class="label label-warning" ng-show="indicacion.prestaciones.prioridad == 'Urgente' || indicacion.prestaciones.prioridad.nombre == 'Urgente'">Urgente</span>
                                    <span class="label label-danger" ng-show="indicacion.prestaciones.prioridad == 'Emergencia' || indicacion.prestaciones.prioridad.nombre == 'Emergencia'">Emergencia</span>
                                    {{indicacion.prestaciones.tipoPrestacion.nombre}}
                                    {{indicacion.prestaciones.tipoPrestacion.texto}}
                                    <!--
                                    turnoFechaHora -->
                                    <!-- {{indicacion.prestaciones}} -->
                                </div>

                                <div ng-if="indicacion.tipo.nombre == 'Dieta' || indicacion.tipo == 'Dieta'">
                                    <span ng-show="indicacion.nutricion.tipo.ayuno">
                                        Ayuno /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.blandoMecanico">
                                        Blando mecánico /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.general">
                                        General /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.acompanante">
                                        Acompañante /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.diabetico">
                                        Diabético /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.licuado">
                                        Licuado /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.insuficienciaRenal">
                                        Insuficencia renal /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.ricoEnResiduo">
                                        Rico en residuo /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.hepatoGastroProtectora">
                                        Hepato/Gastro protectora /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.astringente">
                                        Astringente /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.liquido01">
                                        Líquido 01 /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.sinSal">
                                        Sin sal /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.blandoSinCarne02">
                                        Blando sin carne 02 /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.blandoConCarne03">
                                        Blando sin carne 03 /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.sinGluten">
                                        Sin Gluten /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.todoCocido">
                                        Todo cocido /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.individual">
                                        Individual /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.hiperConColacion">
                                        Hiper c/colocación /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.pediatrico1_2">
                                        Pediátrico 1 - 2 /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.nadaPorBoca">
                                        Nada por boca /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.lactante1_2">
                                        Lactante 1 - 2 /
                                    </span>
                                    <span ng-show="indicacion.nutricion.tipo.hipocalorico">
                                        Hipocalórico /
                                    </span>

                                </div>
                            </td>
                            <td >{{indicacion.via}}</td>
                            <td >
                                <span ng-if="indicacion.frecuencia == 'unica'">UD</span>
                                <span ng-if="indicacion.frecuencia == '24'">Día</span>
                                <span ng-if="indicacion.frecuencia == '12' || indicacion.frecuencia == '8' || indicacion.frecuencia == '6' || indicacion.frecuencia == '4'">
                                    c/{{indicacion.frecuencia}}
                                    hs
                                </span>

                            </td>

                            <!-- <td class="text-center" ng-repeat="hora in horarios">
                                {{ indicacion.horarios[hora] }}
                            </td> -->

                            <td class="text-center" >
                                {{indicacion.createdBy.name}}
                                <br/>
                                {{indicacion.servicio.nombreCorto}}
                            </td>

                            <td class="text-center" >
                                {{indicacion.createdAt | fromNow }}<br/>
                                <div class="text-muted small">
                                    {{indicacion.createdAt | date: "dd/MM/yyyy HH:mm"}}
                                </div>
                            </td>

                            <td class="text-center" >
                                <div ng-if="indicacion.activo">
                                    <div ng-show="!indicaciones.borrar">
                                        <button class="btn btn-default btn-flat tips" title="Editar indicacion" ng-click="indicaciones.editar(indicacion)">
                                            <i class="mdi mdi-pencil"></i>
                                        </button>
                                        <!-- <button class="btn btn-default btn-flat tips" title="Suspender indicacion" ng-click="indicaciones.suspender(indicacion)"> -->
                                        <button class="btn btn-danger btn-flat tips" title="Suspender indicacion" ng-click="indicaciones.suspender(indicacion)">
                                            <i class="mdi mdi-delete"></i>
                                        </button>
                                    </div>

                                    <div ng-show="indicaciones.borrar && indicacion.id == indicacionBorrar.id">
                                        <p>¿Suspender indicación?</p>

                                        <button class="btn btn-default tips" ng-click="indicaciones.cancelarSuspender()" title="No">
                                            <i class="mdi mdi-close"></i>
                                        </button>

                                        <button class="btn btn-success tips" title="Si" ng-click="indicaciones.confirmarBorrado(indicacion)">
                                            <i class="mdi mdi-check"></i>
                                        </button>

                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- <div class="row">
                    <div class="col-lg-12">
                        <div class="card-block margin-top text-right">

                            <button class="btn btn-primary" ng-click="tratamiento.guardar(tratamientoEdit)" ng-disabled="formEditarTratamiento.$invalid">
                                <i class="mdi mdi-content-save"></i>
                                Guardar
                            </button>
                        </div>
                    </div>
                </div> -->
            </div>

        </div>
    </div>



</div> <!-- Fin div ng-controller -->
