<md-tabs md-dynamic-height md-border-bottom md-selected="tab">
    <md-tab label="Seleccionar paciente">
        <div layout layout-pretty whiteframe>
            <div flex>
                <!-- Pacientes con internaciones pendientes -->
                <div ng-if="!esModificacion && pendientes.data.length > 0">
                    <h3>Pacientes que aguardan asignación de cama</h3>
                    <md-table-container>
                        <table md-table md-row-select ng-model="pendientes.seleccionado" md-progress="pendientes.promise" class="mdTableSingleSelect">
                            <thead md-head md-order="pendientes.orden" md-on-reorder="pendientes.ordenar">
                                <tr md-row>
                                    <th md-column md-order-by="ingreso.fechaHora">Fecha</th>
                                    <th md-column md-numeric md-order-by="paciente.apellido">Nombre</th>
                                    <th md-column>Documento</th>
                                    <th md-column md-numeric>Edad</th>
                                    <th md-column>Ingreso</th>
                                    <th md-column>Motivo</th>
                                    <th md-column>Tipo</th>
                                </tr>
                            </thead>
                            <tbody md-body>
                                <tr md-row md-select="item" md-on-select="pendientes.seleccionar" md-auto-select ng-repeat="item in pendientes.data">
                                    <td md-cell>{{item.ingreso.fechaHora | date: "dd/MM/yyyy HH:mm "}}</td>
                                    <td md-cell>{{item.paciente | persona:"an"}}</td>
                                    <td md-cell>{{item.paciente | persona:"d"}}</td>
                                    <td md-cell>{{item.paciente | persona:"e"}}</td>
                                    <td md-cell>{{item.ingreso.tipo}}</td>
                                    <td md-cell>{{item.ingreso.motivo}}</td>
                                    <td md-cell>
                                        <span ng-if="item.estado == 'enIngreso'">En ingreso</span>
                                        <span ng-if="item.estado == 'enPase'">En pase</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </md-table-container>
                </div>

                <!-- Buscar personas por nombre o documento -->
                <h3>Buscar personas</h3>
                <md-input-container class="md-icon-float md-block">
                    <label>Ingrese el documento o apellido</label>
                    <md-icon>search</md-icon>
                    <input type="text" ng-model="personas.query" ng-model-options="{ debounce: { default: 300, blur: 0 } }">
                </md-input-container>
                <md-table-container ng-if="personas.promise || personas.data">
                    <table md-table md-row-select ng-model="personas.seleccionado" md-progress="personas.promise" class="mdTableSingleSelect">
                        <thead md-head>
                            <tr md-row>
                                <th md-column>Nombre</th>
                                <th md-column>Documento</th>
                                <th md-column>Edad</th>
                            </tr>
                        </thead>
                        <tbody md-body>
                            <tr md-row md-select="item" md-on-select="personas.seleccionar" md-auto-select ng-repeat="item in personas.data">
                                <td md-cell>{{item | persona:"an"}}</td>
                                <td md-cell>{{item | persona:"d"}}</td>
                                <td md-cell>{{item | persona:"e"}}</td>
                            </tr>
                        </tbody>
                        <tfoot md-foot>
                            <tr md-row>
                                <td md-cell colspan="3">
                                    <md-progress-circular ng-if="personas.promise" md-mode="indeterminate"></md-progress-circular>
                                    <span ng-if="!personas.promise">
                                        Personas encontradas
                                        <strong>{{personas.data.length}}</strong>
                                    </span>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </md-table-container>
            </div>
        </div>
    </md-tab>
    <md-tab label="Datos de la internación">
        <div layout layout-pretty whiteframe ng-if="internacion.paciente">
            <div flex>
                <div layout>
                    <div flex=10>
                        <md-icon style="font-size: 56px !important">assignment_ind</md-icon>
                    </div>
                    <div flex>
                        <div class="md-headline">
                            {{internacion.paciente | persona}}
                        </div>
                        <div class="md-subhead">
                            <strong>{{internacion.paciente | persona:'d'}}</strong>
                        </div>
                        <div class="md-subhead">
                            {{internacion.paciente | persona:'e'}}
                            |
                            {{internacion.paciente | persona:'f'}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div layout layout-pretty whiteframe>
            <div flex>
                <form>
                    <label>Fecha y hora de la interación</label>
                    <div layout>
                        <mdp-date-picker flex mdp-format="DD/MM/YYYY" ng-model="internacion.ingreso.fechaHora" ng-required="true" plex></mdp-date-picker>
                        <mdp-time-picker flex ng-model="internacion.ingreso.fechaHora" mdp-auto-switch="true" ng-required="true" plex></mdp-time-picker>
                        <span flex></span>
                    </div>
                    <div layout layout-pretty>
                        <div flex>
                            <md-input-container class="md-block">
                                <label>Tipo de ingreso</label>
                                <md-select ng-model="internacion.ingreso.tipo">
                                    <md-option ng-repeat="item in tiposInternacion" value="{{item.id}}">
                                        {{item.nombre}}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                        </div>
                        <div flex>
                            <md-input-container class="md-block">
                                <label>Motivo de la internación</label>
                                <input type="text" ng-model="internacion.ingreso.motivo" plex ng-required="true"/>
                            </md-input-container>
                        </div>
                        <div flex>
                            <md-input-container class="md-block">
                                <label>Diagnóstico presuntivo</label>
                                <input type="text" ng-model="internacion.ingreso.diagnosticoPresuntivo" plex ng-required="true"/>
                            </md-input-container>
                        </div>
                    </div>
                    <div flex layout>
                        <span flex></span>
                        <md-button ng-click="cancelar()">Cancelar</md-button>
                        <md-button class="md-primary md-raised" plex-submit="guardar()">Guardar</md-button>
                    </div>
                </form>
            </div>
        </div>
    </md-tab>
</md-tabs>
